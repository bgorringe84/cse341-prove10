<!DOCTYPE html>
<html>

<head>
  <% include ../includes/header.ejs %>
</head>

<body>
  <% include ../includes/nav.ejs %>
    <div class="jumbotron text-center">
      <div class="container">
        <h1>
          <%= title %>
        </h1>
        <p>Prove 08</p>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <form action="?" method="GET">
        <div class="col-12 input-group mb-4">
          <input type="text" class="form-control" name="search" placeholder="Search in Items"
            aria-label="Search in Items" aria-describedby="button-addon2" value="<%= query%>">
          <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Search</button>
        </div>
        </form>
        <% data.forEach(dataItem=> { %>
          <div class="col-12 col-sm-6 col-md-4 mb-3">
            <div class="card">
              <img src="<%= dataItem.imageUrl %>" class="card-img-top img-card-responsive" alt="<%= dataItem.name %>">
              <div class="card-body">
                <h5 class="card-title">
                  <%= dataItem.name %>
                </h5>
                <p class="card-text card-text-responsive">
                  <%= dataItem.description %>
                </p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <%= dataItem.price %>
                </li>
                <li class="list-group-item">
                  <% for( let i = 0; i < dataItem.tags.length; i++ ) { %>
                    <span><%= dataItem.tags[i]%><%=  i != dataItem.tags.length -1?',':'' %> 
                  </span>
                  <% } %>
                </li>
              </ul>
            </div>
          </div>
          
          <% }) %>
      </div>
          <form class="container">
            <ul class="pagination justify-content-center">
              <li class="page-item">
                <a class="page-link"
                <% if(page > 1) { %>
                  href="/prove08/?page=1" 
                  <% } %>
                aria-label="First">
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">First</span>
                </a>
              </li>
              <li class="page-item">
                <a class="page-link"
                <% if(page > 1) { %>
                  href="/prove08/?page=<%= (page - 1)  %>" 
                  <% } %>
                aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">Previous</span>
                </a>
              </li>
              <% for (var i = 1; i <= numPages; i++) { %>
                <li class="page-item <%= page  == i ? 'active' : '' %>"><a class="page-link" href="/prove08/?page=<%= i %>"><%= i %></a></li>
              <% } %>
                <a class="page-link" 
                  <% if(page < numPages) { %>
                  href="/prove08/?page=<%= (++page) %>" 
                  <% } %>
                aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Next</span>
                </a>
              </li>
              <li class="page-item">
                <a class="page-link"
                <% if(page < numPages) { %>
                  href="/prove08/?page=<%= numPages %>" 
                  <% } %>
                aria-label="Last">
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Last</span>
                </a>
              </li>
            </ul>
          </form>
    </div>


</body>

</html>